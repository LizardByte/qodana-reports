---
version: "1.0"
linter: jetbrains/qodana-python:2023.1-eap

bootstrap: |
  # setup python
  
  # qodana removed pyenv in 2023.1 - https://github.com/JetBrains/Qodana/discussions/149
  # downloading and modifying the xml file on the fly is hacky
  
  # pyenv install 3.9.15
  # pyenv global 3.9.15
  python3 -m venv /data/cache/venv
  source /data/cache/venv/bin/activate
  python3 -m pip install -r /data/project/requirements-dev.txt

  # remove idea directory
  # https://github.com/JetBrains/Qodana/discussions/134#discussioncomment-4329981
  # rm -rf .idea

failThreshold: 100

include:
  - name: CheckDependencyLicenses  # license audit is not currently working, but leave it enabled anyway

profile:
  # path: .idea/inspectionProfiles/project.xml
  # name: qodana.starter
  name: qodana.recommended
